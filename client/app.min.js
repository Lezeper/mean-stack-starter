var app=angular.module("app",["ui.router"]);!function(){app.controller("footerCtrl",["$scope","meanData","$rootScope",function(t,e,n){t.year=(new Date).getFullYear(),e.getSettings().then(function(t){1==t.data.length&&(n.settings=t.data[0])})}]),app.controller("mainCtrl",["$scope","$rootScope",function(t,e){e.prismHighlight=function(){Prism.highlightAll()},e.tinymceUsage={setup:function(t){t.on("keydown",function(e){if(9==e.keyCode)return e.shiftKey?t.execCommand("Outdent"):t.execCommand("Indent"),e.preventDefault(),!1})},height:250,plugins:"link image codesample advlist code preview",toolbar:"undo redo | bold italic | alignleft aligncenter alignright | bullist numlist | codesample | link image",valid_elements:"*[*]"},e.$on("onFinishRepeat",function(e){t.prismHighlight()})}]),app.directive("onFinishRepeat",["$timeout",function(t){return{restrict:"A",link:function(e,n,o){e.$last===!0&&t(function(){e.$emit(o.onFinishRepeat)})}}}]),app.directive("subCatCounts",function(){return function(t,e,n){"doc"==t.group&&t.meanData.getDocCountsByCategory(n.subCatCounts).then(function(t){e.html(t.data)}),"que"==t.group&&t.meanData.getQueCountsByCategory(n.subCatCounts).then(function(t){e.html(t.data)})}}),app.run(["$transitions","$state","authentication",function(t,e,n){t.onStart({},function(t){t.$to().name.indexOf("admin")>=0&&(n.isLoggedIn()||e.go("login"))})}])}(),function(){app.config(["$stateProvider","$locationProvider","$urlRouterProvider",function(t,e,n){t.state("home",{url:"/",templateUrl:"/home/home.view.html",controller:"homeCtrl"}).state("login",{url:"/login",templateUrl:"/auth/auth.view.html",controller:"loginCtrl"}).state("admin",{url:"/admin/",templateUrl:"/admin/admin.view.html",controller:"adminCtrl"}).state("admin.overviews",{url:"overviews/",templateUrl:"/admin/overviews/overviews.view.html",controller:"overviewsCtrl"}).state("admin.userm",{url:"userm/",templateUrl:"/admin/userm/userm.view.html",controller:"usermCtrl"}).state("admin.log",{url:"log/",templateUrl:"/admin/log/log.view.html",controller:"logCtrl"}).state("admin.settings",{url:"settings/",templateUrl:"/admin/settings/settings.view.html",controller:"settingsCtrl"}),n.otherwise("/"),e.html5Mode(!0)}])}(),function(){app.controller("adminCtrl",["$scope",function(t){}])}(),function(){app.controller("loginCtrl",["$scope","authentication","meanData",function(t,e,n){t.error=!1,t.login=function(n){e.login(n).then(function(){window.location.href="/"},function(){t.error=!0})},t.register=function(t){n.createUser(t).then(function(t){alert(t.message),window.location.href="/"})}}])}(),function(){app.controller("homeCtrl",["$scope",function(t){t.accounts=[{id:0,name:"Citi Check",dueDate:0,closingDate:0,CL:0,balance:295,lastBalance:0,allowRatio:0},{id:1,name:"DC",dueDate:14,closingDate:16,CL:3500,balance:202,lastBalance:100,allowRatio:3},{id:2,name:"Freedom",dueDate:10,closingDate:13,CL:7e3,balance:467,lastBalance:0,allowRatio:4},{id:3,name:"Amazon",dueDate:27,closingDate:3,CL:6e3,balance:168,lastBalance:260,allowRatio:5}],t.activities=[{date:"2/24/2017",type:"Credit",amount:1735.33,account:"Citi Check",notes:"Salary Direct Deposit"},{date:"2/27/2017",type:"Debit",amount:15,account:"DC",notes:"Dreamhost Fee"},{date:"2/28/2017",type:"Debit",amount:500,account:"DC",notes:"Honda Financial Serivce"},{date:"3/1/2017",type:"Debit",amount:1350,account:"Citi Check",notes:"Hosing Rent"},{date:"3/14/2017",type:"Credit",amount:202,account:"Citi Check",notes:"CC Payment"}]}])}(),function(){app.controller("logCtrl",["$scope","meanData","$state",function(t,e,n){t.findAllLogs=function(){e.getAllLogs().then(function(e){t.logs=e.data})},t.deleteAllLogs=function(){e.deleteAllLogs().then(function(t){alert(t.data.message),n.reload()})}}])}(),function(){app.controller("overviewsCtrl",["$scope","meanData",function(t,e){}])}(),function(){app.controller("settingsCtrl",["$scope","meanData","$state",function(t,e,n){t.backupDB=function(){e.doDBBackup().then(function(t){alert(t.data.message),n.reload()})},t.getSettings=function(){e.getSettings().then(function(e){e.length>1?alert("More than one settings found!"):t.settings=e.data[0]})},t.updateSettings=function(t){e.updateSettings(t).then(function(t){alert(t.data.message),window.location.href="/admin/settings"})},t.deleteSettings=function(){e.deleteSettings().then(function(t){alert(t.data.message)})}}])}(),function(){app.controller("usermCtrl",["$scope","meanData","$state",function(t,e,n){e.getAllUsers().then(function(e){t.users=e.data}),t.deleteUser=function(t){confirm("Are you sure to delete?")&&e.deleteUser(t).then(function(t){alert(t.data.message),n.reload()})}}])}(),function(){app.service("authentication",["$http","$window",function(t,e){var n=function(t){e.localStorage["mean-token"]=t},o=function(){return e.localStorage["mean-token"]},a=function(){var t,n=o();return!!n&&(t=n.split(".")[1],t=e.atob(t),t=JSON.parse(t),t.exp>Date.now()/1e3)},i=function(){if(a()){var t=o(),n=t.split(".")[1];return n=e.atob(n),n=JSON.parse(n),{_id:n._id,name:n.name}}},r=function(e){return t.post("/api/login",e).then(function(t){n(t.data.token)})},l=function(){e.localStorage.removeItem("mean-token")};return{login:r,isLoggedIn:a,currentUser:i,logout:l,getToken:o}}])}(),function(){app.service("meanData",["$http","authentication",function(t,e){var n="/api",o={headers:{Authorization:"Bearer "+e.getToken()}},a=function(){return t.get(n+"/user",o)},i=function(e){return t.get(n+"/user/"+e,o)},r=function(e){return t.post(n+"/user",e)},l=function(e){return t.put(n+"/user",e,o)},u=function(e){return t["delete"](n+"/user?id="+e,o)},c=function(){return t.get(n+"/log",o)},s=function(e){return t.get(n+"/log?ip="+e,o)},g=function(e){return t.get(n+"/log?date="+e,o)},d=function(){return t["delete"](n+"/log",o)},m=function(){return t.get(n+"/settings",o)},p=function(){return t.get(n+"/settings/dbbu",o)},f=function(e){return t.put(n+"/settings",e,o)},h=function(){return t["delete"](n+"/settings",o)};return{getAllUsers:a,createUser:r,updateUser:l,deleteUser:u,getUserById:i,getSettings:m,doDBBackup:p,updateSettings:f,deleteSettings:h,getAllLogs:c,getLogsByIp:s,getLogsByDate:g,deleteAllLogs:d}}])}(),function(){app.directive("navigation",function(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.view.html"}}),app.controller("navCtrl",["$scope","$location","authentication","$state","$window","$rootScope",function(t,e,n,o,a,i){t.logout=function(){n.logout(),a.location.href="/"},t.currentUser=n.currentUser(),t.isLoggedIn=n.isLoggedIn(),i.isActive=function(t){return"/"===t?e.path()===t:e.path().indexOf(t)>=0}}])}();
//# sourceMappingURL=app.min.js.map
