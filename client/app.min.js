!function(){angular.module("app",["ngRoute"]).config(["$routeProvider","$locationProvider",function(e,n){e.when("/",{templateUrl:"/home/home.view.html",controller:"homeCtrl"}).when("/login",{templateUrl:"/auth/auth.view.html",controller:"loginCtrl"}).otherwise({redirectTo:"/"}),n.html5Mode({enabled:!0,requireBase:!1})}]).controller("footerCtrl",["$scope",function(e){e.year=(new Date).getFullYear()}])}(),function(){angular.module("app").controller("loginCtrl",["$scope","authentication",function(e,n){e.error=!1,e.login=function(){n.login(e.user).error(function(){e.error=!0}).then(function(){window.location.href="/"})}}])}(),function(){angular.module("app").controller("homeCtrl",["$scope","meanData","authentication",function(e,n,t){e.isLogin=t.isLoggedIn(),t.currentUser()&&n.getUserById(t.currentUser()._id).success(function(n){e.currentUser=n}),e.register=function(){n.createUser(e.user).success(function(e){alert(e.message),window.location.href="/"})},e.updateUser=function(){n.updateUser(e.currentUser).success(function(e){alert(e.message),window.location.href="/"})},e.logout=function(){t.logout(),window.location.href="/"}}])}(),function(){angular.module("app").service("authentication",["$http","$window","meanData",function(e,n,t){var r=function(e){n.localStorage["mean-token"]=e},o=function(){return n.localStorage["mean-token"]},i=function(){var e,t=o();return t?(e=t.split(".")[1],e=n.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3):!1},u=function(){if(i()){var e=o(),t=e.split(".")[1];return t=n.atob(t),t=JSON.parse(t),{_id:t._id}}},a=function(n){return e.post("/api/login",n).success(function(e){r(e.token)})},c=function(){n.localStorage.removeItem("mean-token")};return{login:a,isLoggedIn:i,currentUser:u,logout:c}}])}(),function(){angular.module("app").service("meanData",["$http",function(e){var n=function(){return e.get("/api/user")},t=function(n){return e.get("/api/user/"+n)},r=function(n){return e.post("/api/user",n)},o=function(n){return e.put("/api/user",n,{})},i=function(n){return e["delete"]("/api/user?id="+n,{})};return{getAllUsers:n,createUser:r,updateUser:o,deleteUser:i,getUserById:t}}])}(),function(){angular.module("app").directive("navigation",function(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.view.html"}})}();
//# sourceMappingURL=app.min.js.map
