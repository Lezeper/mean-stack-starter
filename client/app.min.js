!function(){angular.module("app",["ngRoute"]).config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"/test/test.view.html",controller:"testCtrl"}).when("/login",{templateUrl:"/auth/auth.view.html",controller:"loginCtrl"}).otherwise({redirectTo:"/"}),t.html5Mode({enabled:!0,requireBase:!1})}]).controller("footerCtrl",["$scope",function(e){e.year=(new Date).getFullYear()}])}(),function(){angular.module("app").controller("loginCtrl",["$scope","authentication","meanData",function(e,t,n){e.error=!1,e.login=function(n){t.login(n).error(function(){e.error=!0}).then(function(){window.location.href="/"})},e.register=function(e){n.createUser(e).success(function(e){alert(e.message),window.location.href="/"})}}])}(),function(){angular.module("app").controller("testCtrl",["$scope","meanData","authentication",function(e,t,n){e.isLogin=n.isLoggedIn(),n.currentUser()&&t.getUserById(n.currentUser()._id).success(function(t){e.currentUser=t}),e.logout=function(){n.logout(),window.location.href="/"},e.updateUser=function(){t.updateUser(e.currentUser).success(function(e){alert(e.message),window.location.href="/"})}}])}(),function(){angular.module("app").service("authentication",["$http","$window","meanData",function(e,t,n){var r=function(e){t.localStorage["mean-token"]=e},o=function(){return t.localStorage["mean-token"]},i=function(){var e,n=o();return!!n&&(e=n.split(".")[1],e=t.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3)},a=function(){if(i()){var e=o(),n=e.split(".")[1];return n=t.atob(n),n=JSON.parse(n),{_id:n._id}}},u=function(t){return e.post("/api/login",t).success(function(e){r(e.token)})},c=function(){t.localStorage.removeItem("mean-token")};return{login:u,isLoggedIn:i,currentUser:a,logout:c}}])}(),function(){angular.module("app").service("meanData",["$http",function(e){var t=function(){return e.get("/api/user")},n=function(t){return e.get("/api/user/"+t)},r=function(t){return e.post("/api/user",t)},o=function(t){return e.put("/api/user",t,{})},i=function(t){return e["delete"]("/api/user?id="+t,{})};return{getAllUsers:t,createUser:r,updateUser:o,deleteUser:i,getUserById:n}}])}(),function(){angular.module("app").directive("navigation",function(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.view.html"}})}();
//# sourceMappingURL=app.min.js.map
