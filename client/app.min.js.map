{"version":3,"sources":["app.min.js"],"names":["angular","module","config","$routeProvider","$locationProvider","when","templateUrl","controller","otherwise","redirectTo","html5Mode","enabled","requireBase","$scope","year","Date","getFullYear","authentication","error","login","user","then","window","location","href","meanData","isLogin","isLoggedIn","currentUser","getUserById","_id","success","data","register","createUser","res","alert","message","updateUser","logout","service","$http","$window","saveToken","token","localStorage","getToken","payload","split","atob","JSON","parse","exp","now","post","removeItem","getAllUsers","get","id","newUser","put","deleteUser","directive","restrict"],"mappings":"CAAA,WACEA,QAAQC,OAAO,OAAQ,YAAYC,QAAQ,iBAAkB,oBAC3D,SAAUC,EAAgBC,GACxBD,EACGE,KAAK,KACJC,YAAa,uBACbC,WAAY,aAEbF,KAAK,UACJC,YAAa,uBACbC,WAAY,cAEbC,WAAWC,WAAY,MAE1BL,EAAkBM,WAChBC,SAAS,EACTC,aAAa,OAEfL,WAAW,cAAe,SAAU,SAAUM,GAChDA,EAAOC,MAAO,GAAIC,OAAOC,oBAG7B,WACEhB,QAAQC,OAAO,OACZM,WAAW,aAAc,SAAU,iBAAkB,SAAUM,EAAQI,GAEtEJ,EAAOK,OAAQ,EAEfL,EAAOM,MAAQ,WACbF,EAAeE,MAAMN,EAAOO,MACzBF,MAAM,WACLL,EAAOK,OAAQ,IAEhBG,KAAK,WACJC,OAAOC,SAASC,KAAO,aAMnC,WACExB,QAAQC,OAAO,OAAOM,WAAW,YAAa,SAAU,WAAY,iBAClE,SAAUM,EAAQY,EAAUR,GAE1BJ,EAAOa,QAAUT,EAAeU,aAE7BV,EAAeW,eAChBH,EAASI,YAAYZ,EAAeW,cAAcE,KAAKC,QAAQ,SAAUC,GACvEnB,EAAOe,YAAcI,IAKzBnB,EAAOoB,SAAW,WAChBR,EAASS,WAAWrB,EAAOO,MAAMW,QAAQ,SAAUI,GACjDC,MAAMD,EAAIE,SACVf,OAAOC,SAASC,KAAO,OAI3BX,EAAOyB,WAAa,WAClBb,EAASa,WAAWzB,EAAOe,aAAaG,QAAQ,SAAUI,GACxDC,MAAMD,EAAIE,SACVf,OAAOC,SAASC,KAAO,OAI3BX,EAAO0B,OAAS,WACdtB,EAAesB,SACfjB,OAAOC,SAASC,KAAO,WAI/B,WACExB,QAAQC,OAAO,OAAOuC,QAAQ,kBAAmB,QAAS,UAAW,WAAY,SAAUC,EAAOC,EAASjB,GAEzG,GAAIkB,GAAY,SAAUC,GACxBF,EAAQG,aAAa,cAAgBD,GAGnCE,EAAW,WACb,MAAOJ,GAAQG,aAAa,eAG1BlB,EAAa,WACf,GACIoB,GADAH,EAAQE,GAGZ,OAAGF,IACDG,EAAUH,EAAMI,MAAM,KAAK,GAC3BD,EAAUL,EAAQO,KAAKF,GACvBA,EAAUG,KAAKC,MAAMJ,GAEdA,EAAQK,IAAMrC,KAAKsC,MAAQ,MAE3B,GAIPzB,EAAc,WAChB,GAAGD,IAAa,CACd,GAAIiB,GAAQE,IACRC,EAAUH,EAAMI,MAAM,KAAK,EAI/B,OAHAD,GAAUL,EAAQO,KAAKF,GACvBA,EAAUG,KAAKC,MAAMJ,IAGnBjB,IAAMiB,EAAQjB,OAKhBX,EAAQ,SAAUC,GACpB,MAAOqB,GAAMa,KAAK,aAAclC,GAAMW,QAAQ,SAAUC,GACtDW,EAAUX,EAAKY,UAIfL,EAAS,WACXG,EAAQG,aAAaU,WAAW,cAGlC,QACEpC,MAAOA,EACPQ,WAAYA,EACZC,YAAaA,EACbW,OAAQA,SAMd,WACEvC,QAAQC,OAAO,OAAOuC,QAAQ,YAAa,QAAS,SAAkBC,GAEpE,GAAIe,GAAc,WAChB,MAAOf,GAAMgB,IAAI,cAGf5B,EAAc,SAAU6B,GAC1B,MAAOjB,GAAMgB,IAAI,aAAeC,IAG9BxB,EAAa,SAAUyB,GACzB,MAAOlB,GAAMa,KAAK,YAAaK,IAG7BrB,EAAa,SAAUA,GACzB,MAAOG,GAAMmB,IAAI,YAAatB,OAG5BuB,EAAa,SAAUH,GACzB,MAAOjB,GAAAA,UAAa,gBAAkBiB,MAGxC,QACEF,YAAaA,EACbtB,WAAYA,EACZI,WAAYA,EACZuB,WAAYA,EACZhC,YAAaA,SAInB,WACE7B,QAAQC,OAAO,OAAO6D,UAAU,aAAc,WAC5C,OACEC,SAAU,KACVzD,YAAa","file":"app.min.js","sourcesContent":["(function () {\r\n  angular.module('app', ['ngRoute']).config(['$routeProvider', '$locationProvider',\r\n    function ($routeProvider, $locationProvider) {\r\n      $routeProvider\r\n        .when('/', {\r\n          templateUrl: '/home/home.view.html',\r\n          controller: \"homeCtrl\"\r\n        })\r\n        .when('/login', {\r\n          templateUrl: \"/auth/auth.view.html\",\r\n          controller: \"loginCtrl\"\r\n        })\r\n        .otherwise({redirectTo: '/'});\r\n\r\n      $locationProvider.html5Mode({\r\n        enabled: true,\r\n        requireBase: false\r\n      });\r\n  }]).controller('footerCtrl', ['$scope', function ($scope) {\r\n    $scope.year = new Date().getFullYear();\r\n  }])\r\n})();\n(function () {\r\n  angular.module('app')\r\n    .controller('loginCtrl', ['$scope', 'authentication', function ($scope, authentication) {\r\n\r\n      $scope.error = false;\r\n\r\n      $scope.login = function () {\r\n        authentication.login($scope.user)\r\n          .error(function () {\r\n            $scope.error = true;\r\n          })\r\n          .then(function () {\r\n            window.location.href = \"/\";\r\n          })\r\n      };\r\n\r\n    }])\r\n})();\n(function () {\r\n  angular.module('app').controller('homeCtrl', ['$scope', 'meanData', 'authentication',\r\n    function ($scope, meanData, authentication) {\r\n\r\n      $scope.isLogin = authentication.isLoggedIn();\r\n\r\n      if(authentication.currentUser()){\r\n        meanData.getUserById(authentication.currentUser()._id).success(function (data) {\r\n          $scope.currentUser = data;\r\n        });\r\n      }\r\n\r\n\r\n      $scope.register = function () {\r\n        meanData.createUser($scope.user).success(function (res) {\r\n          alert(res.message);\r\n          window.location.href = \"/\";\r\n        })\r\n      };\r\n\r\n      $scope.updateUser = function () {\r\n        meanData.updateUser($scope.currentUser).success(function (res) {\r\n          alert(res.message);\r\n          window.location.href = \"/\";\r\n        })\r\n      };\r\n\r\n      $scope.logout = function () {\r\n        authentication.logout();\r\n        window.location.href = \"/\";\r\n      }\r\n    }]);\r\n})();\n(function () {\r\n  angular.module('app').service('authentication', ['$http', '$window', 'meanData', function ($http, $window, meanData) {\r\n\r\n    var saveToken = function (token) {\r\n      $window.localStorage['mean-token'] = token;\r\n    };\r\n\r\n    var getToken = function () {\r\n      return $window.localStorage['mean-token'];\r\n    };\r\n\r\n    var isLoggedIn = function () {\r\n      var token = getToken();\r\n      var payload;\r\n\r\n      if(token){\r\n        payload = token.split('.')[1];\r\n        payload = $window.atob(payload);\r\n        payload = JSON.parse(payload);\r\n\r\n        return payload.exp > Date.now() / 1000;\r\n      }else{\r\n        return false;\r\n      }\r\n    };\r\n\r\n    var currentUser = function() {\r\n      if(isLoggedIn()){\r\n        var token = getToken();\r\n        var payload = token.split('.')[1];\r\n        payload = $window.atob(payload);\r\n        payload = JSON.parse(payload);\r\n        \r\n        return {\r\n          _id : payload._id\r\n        };\r\n      }\r\n    };\r\n\r\n    var login = function (user) {\r\n      return $http.post('/api/login', user).success(function (data) {\r\n        saveToken(data.token);\r\n      })\r\n    };\r\n\r\n    var logout = function () {\r\n      $window.localStorage.removeItem('mean-token');\r\n    };\r\n\r\n    return {\r\n      login: login,\r\n      isLoggedIn: isLoggedIn,\r\n      currentUser: currentUser,\r\n      logout: logout\r\n    }\r\n\r\n  }])\r\n  \r\n})();\n(function () {\r\n  angular.module('app').service('meanData', ['$http', function meanData($http) {\r\n\r\n    var getAllUsers = function () {\r\n      return $http.get('/api/user');\r\n    };\r\n\r\n    var getUserById = function (id) {\r\n      return $http.get('/api/user/' + id);\r\n    };\r\n\r\n    var createUser = function (newUser) {\r\n      return $http.post('/api/user', newUser);\r\n    };\r\n\r\n    var updateUser = function (updateUser) {\r\n      return $http.put('/api/user', updateUser, {});\r\n    };\r\n\r\n    var deleteUser = function (id) {\r\n      return $http.delete('/api/user?id=' + id, {});\r\n    };\r\n\r\n    return {\r\n      getAllUsers: getAllUsers,\r\n      createUser: createUser,\r\n      updateUser: updateUser,\r\n      deleteUser: deleteUser,\r\n      getUserById: getUserById\r\n    }\r\n  }])\r\n})();\n(function () {\r\n  angular.module('app').directive('navigation', function () {\r\n    return {\r\n      restrict: 'EA',\r\n      templateUrl: '/common/directives/navigation/navigation.view.html'\r\n    }\r\n  })\r\n})();"],"sourceRoot":"/source/"}