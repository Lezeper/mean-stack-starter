{"version":3,"sources":["app.min.js"],"names":["app","angular","module","controller","$scope","meanData","$rootScope","year","Date","getFullYear","getSettings","then","res","data","length","settings","prismHighlight","Prism","highlightAll","tinymceUsage","setup","editor","on","event","keyCode","shiftKey","execCommand","preventDefault","height","plugins","toolbar","valid_elements","$on","evt","directive","$timeout","restrict","link","scope","element","attr","$last","$emit","onFinishRepeat","attrs","group","getDocCountsByCategory","subCatCounts","result","html","getQueCountsByCategory","run","$transitions","$state","authentication","onStart","$to","name","indexOf","isLoggedIn","go","config","$stateProvider","$locationProvider","$urlRouterProvider","state","url","templateUrl","otherwise","html5Mode","error","login","user","window","location","href","register","cUser","createUser","success","alert","message","getAllTest","Promise","resolve","reject","err","errmsg","getTestById","createTest","test","id","updateTest","deleteTestById","findAllLogs","getAllLogs","logs","deleteAllLogs","reload","number","getNumber","num","Array","changeFUrl","mg","frontUrl","moduleName","toLowerCase","addProp","doGenerate","createModuleModel","$controller","getAllModuleModel","module_model","deleteModuleModel","deleteModuleModelById","checkedFalse","mm","checked","$digest","testModule","Module_Name","testModel","testUpdateModel","required_p","forEach","r","Object","keys","o","$new","module_name","console","log","data_","getAllUsers","users","deleteUser","confirm","backupDB","doDBBackup","updateSettings","deleteSettings","service","$http","$window","saveToken","token","localStorage","getToken","payload","split","atob","JSON","parse","exp","now","currentUser","_id","post","logout","removeItem","serverUrl","auth","headers","Authorization","get","getUserById","newUser","updateUser","put","getLogsByIp","ip","getLogsByDate","date","updateModuleModel","$location","isActive","viewLocation","path"],"mappings":"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","file":"app.min.js","sourcesContent":["var app = angular.module('app', ['ui.router']);\n(function () {\n  app.controller('footerCtrl', ['$scope', 'meanData', '$rootScope',\n        function ($scope, meanData, $rootScope) {\n    $scope.year = new Date().getFullYear();\n    meanData.getSettings().then(function(res){\n      if(res.data.length == 1){\n        $rootScope.settings = res.data[0];\n      }\n    }); \n  }]);\n\n  app.controller('mainCtrl', ['$scope', '$rootScope', function($scope, $rootScope){\n    $rootScope.prismHighlight = function(){\n      Prism.highlightAll();\n    };\n\n    $rootScope.tinymceUsage = {\n\t  setup: function(editor){\n\t\t  editor.on('keydown', function(event){\n\t\t\t if(event.keyCode == 9){\n\t\t\t\t if(event.shiftKey){\n\t\t\t\t\t editor.execCommand('Outdent');\n\t\t\t\t }else{\n\t\t\t\t\t editor.execCommand('Indent');\n\t\t\t\t }\n\t\t\t\t event.preventDefault();\n\t\t\t\t return false;\n\t\t\t } \n\t\t  });\n\t  },\n      height: 250,\n      plugins: 'link image codesample advlist code preview',\n      toolbar: 'undo redo | bold italic | alignleft aligncenter alignright | bullist numlist | codesample | link image',\n      valid_elements : '*[*]'\n    };\n    $rootScope.$on('onFinishRepeat', function(evt){\n      $scope.prismHighlight();\n    });\n    \n  }]);\n\n  app.directive('onFinishRepeat', ['$timeout', function($timeout){\n    return {\n      restrict: 'A',\n      link: function(scope, element, attr){\n        if(scope.$last === true){\n          $timeout(function(){\n            scope.$emit(attr.onFinishRepeat);\n          });\n        }\n      }\n    }\n  }]);\n\n  app.directive('subCatCounts', function(){\n    return function(scope, element, attrs){\n      if(scope.group == 'doc'){\n        scope.meanData.getDocCountsByCategory(attrs.subCatCounts)\n                          .then(function(result){\n          element.html(result.data);\n        });\n      }\n      if(scope.group == 'que'){\n        scope.meanData.getQueCountsByCategory(attrs.subCatCounts)\n                          .then(function(result){\n          element.html(result.data);\n        });\n      }\n    };\n  });\n\n  app.run(['$transitions', '$state', 'authentication', \n          function($transitions, $state, authentication){\n    $transitions.onStart({}, function($transitions){\n\n      if($transitions.$to().name.indexOf('admin') >= 0){\n        if(!authentication.isLoggedIn())\n          $state.go('login');\n      }\n      \n    });\n  }]);\n})();\n(function(){\r\n\tapp.config(['$stateProvider', '$locationProvider', '$urlRouterProvider',\r\n    function ($stateProvider, $locationProvider, $urlRouterProvider) {\r\n      $stateProvider\r\n        .state('home', {\r\n          url: '/',\r\n          templateUrl: '/home/home.view.html',\r\n          controller: \"homeCtrl\"\r\n        })\r\n        .state('login', {\r\n          url: '/login', // can't named \"auth\"\r\n          templateUrl: \"/auth/auth.view.html\",\r\n          controller: \"loginCtrl\"\r\n        })\r\n        .state('admin', {\r\n          url: '/admin/',\r\n          templateUrl: \"/admin/admin.view.html\",\r\n          controller: \"adminCtrl\"\r\n        })\r\n        .state('admin.overviews', {\r\n          url: 'overviews/',\r\n          templateUrl: \"/admin/overviews/overviews.view.html\",\r\n          controller: \"overviewsCtrl\"\r\n        })\r\n        .state('admin.userm', {\r\n          url: 'userm/',\r\n          templateUrl: \"/admin/userm/userm.view.html\",\r\n          controller: \"usermCtrl\"\r\n        })\r\n        .state('admin.mg', {\r\n          url: 'mg/',\r\n          templateUrl: \"/admin/mg/mg.view.html\",\r\n          controller: \"mgCtrl\"\r\n        })\r\n        .state('admin.module', {\r\n          url: 'module/',\r\n          templateUrl: \"/admin/module/module.view.html\",\r\n          controller: \"moduleCtrl\"\r\n        })\r\n        .state('admin.log', {\r\n          url: 'log/',\r\n          templateUrl: \"/admin/log/log.view.html\",\r\n          controller: \"logCtrl\"\r\n        })\r\n/*** Test ***/.state('test', { url: '/test/', templateUrl: '/test/test.view.html', controller: 'testCtrl' })/*** /Test ***//*MG*/\r\n        .state('admin.settings', {\r\n          url: 'settings/',\r\n          templateUrl: \"/admin/settings/settings.view.html\",\r\n          controller: \"settingsCtrl\"\r\n        });\r\n\r\n        $urlRouterProvider.otherwise('/');\r\n\r\n      $locationProvider.html5Mode(true);\r\n\r\n  }]);\r\n})();\n(function(){\n\tapp.controller('adminCtrl', [\"$scope\", function($scope){\n\t\t\n\t}])\n})();\n(function () {\r\n  app.controller('loginCtrl', ['$scope', 'authentication', 'meanData', \r\n      function ($scope, authentication, meanData) {\r\n\r\n      $scope.error = false;\r\n\r\n      $scope.login = function (user) {\r\n        authentication.login(user)\r\n          .error(function () {\r\n            $scope.error = true;\r\n          })\r\n          .then(function () {\r\n            window.location.href = \"/\";\r\n          })\r\n      };\r\n\r\n      $scope.register = function (cUser) {\r\n        meanData.createUser(cUser).success(function (res) {\r\n          alert(res.message);\r\n          window.location.href = \"/\";\r\n        })\r\n      };\r\n\r\n    }])\r\n})();\n(function(){\r\n\tapp.controller('homeCtrl', ['$scope', function($scope){\r\n\t\t\r\n\t}]);\r\n})();\n(function(){\n\tapp.controller(\"testCtrl\", [\"$scope\", \"meanData\", \n\t\tfunction($scope, meanData){\n\n\t\t$scope.getAllTest = function(){\n\t\t\treturn new Promise(function(resolve, reject){\n\t\t\t\tmeanData.getAllTest().then(function(res){\n\t\t\t\t\tresolve(res.data);\n\t\t\t\t}, function(err){\n\t\t\t\t\talert(err.data.errmsg);\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t})\n\t\t}\n\n\t\t$scope.getTestById = function(){\n\t\t\treturn new Promise(function(resolve, reject){\n\t\t\t\tmeanData.getTestById().then(function(res){\n\t\t\t\t\tresolve(res.data);\n\t\t\t\t}, function(err){\n\t\t\t\t\talert(err.data.errmsg);\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t})\n\t\t}\n\n\t\t$scope.createTest = function(test){\n\t\t\treturn new Promise(function(resolve, reject){\n\t\t\t\tmeanData.createTest(test).then(function(res){\n\t\t\t\t\talert(res.data.message);\n\t\t\t\t\tresolve(res.data.id);\n\t\t\t\t}, function(err){\n\t\t\t\t\talert(err.data.errmsg);\n\t\t\t\t\treject(err.data.errmsg);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t$scope.updateTest = function(test){\n\t\t\treturn new Promise(function(resolve, reject){\n\t\t\t\tmeanData.updateTest(test).then(function(res){\n\t\t\t\t\talert(res.data.message);\n\t\t\t\t\tresolve();\n\t\t\t\t}, function(err){\n\t\t\t\t\talert(err.data.errmsg);\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t$scope.deleteTestById = function(id){\n\t\t\treturn new Promise(function(resolve, reject){\n\t\t\t\tmeanData.deleteTestById(id).then(function(res){\n\t\t\t\t\talert(res.data.message);\n\t\t\t\t\tresolve();\n\t\t\t\t}, function(err){\n\t\t\t\t\talert(err.data.errmsg);\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t}]);\n})();\n(function(){\r\n\tapp.controller('logCtrl', ['$scope', 'meanData', \r\n\t\t'$state', function($scope, meanData, $state){\r\n\r\n\t\t$scope.findAllLogs = function(){\r\n\t\t\tmeanData.getAllLogs().then(function(data){\r\n\t\t\t\t$scope.logs = data.data;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteAllLogs = function(){\r\n\t\t\tmeanData.deleteAllLogs().then(function(res){\r\n\t\t\t\talert(res.data.message);\r\n\t\t\t\t$state.reload();\r\n\t\t\t});\r\n\t\t}\r\n\t}])\r\n})();\n(function(){\r\n\tapp.controller('mgCtrl', ['$scope', 'meanData', \r\n\t\tfunction($scope, meanData){\r\n\t\t$scope.number = 1;\r\n\t\t$scope.getNumber = function(num) {\r\n\t\t    return new Array(num);   \r\n\t\t}\r\n\r\n\t\t$scope.changeFUrl = function(mg) {\r\n\t\t\tmg.frontUrl = \"/\" + mg.moduleName.toLowerCase();\r\n\t\t}\r\n\r\n\t\t$scope.addProp = function(num){\r\n\t\t\tif(num < 0 && $scope.number <= 1)\r\n\t\t\t\treturn;\r\n\t\t\t$scope.number = $scope.number + num;\r\n\t\t}\r\n\t\t\r\n\t\t$scope.doGenerate = function(mg){\r\n\t\t\tmeanData.createModuleModel(mg).then(function(res){\r\n\t\t\t\talert(res.data.message || res.data);\r\n\t\t\t\twindow.location.href = \"/admin/module/\";\r\n\t\t\t}, function(err){\r\n\t\t\t\talert(err.data);\r\n\t\t\t});\r\n\t\t}\r\n\t}]);\r\n})();\n(function(){\r\n\tapp.controller('moduleCtrl', ['$scope', '$controller', 'meanData', '$state',\r\n\t\tfunction($scope, $controller, meanData, $state){\r\n\t\t\r\n\t\t$scope.getAllModuleModel = function(){\r\n\t\t\tmeanData.getAllModuleModel().then(function(res){\r\n\t\t\t\t$scope.module_model = res.data;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteModuleModel = function(id, moduleName){\r\n\t\t\tmeanData.deleteModuleModelById(id, moduleName).then(function(res){\r\n\t\t\t\talert(res.data.message);\r\n\t\t\t\t$state.reload();\r\n\t\t\t}, function(err){\r\n\t\t\t\talert(err.data);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar checkedFalse = function(mm, $scope){\r\n\t\t\tmm.checked=false;\r\n\t\t\t$scope.$digest();\r\n\t\t}\r\n\r\n\t\t/* Now only can check String, Date, Number and Array type */\r\n\t\t$scope.testModule = function(Module_Name, mm){\r\n\t\t\tvar testModel = {};\r\n\t\t\tvar testUpdateModel = {};\r\n\t\t\tmm.required_p.forEach(function(r){\r\n\t\t\t\tObject.keys(r).forEach(function(o){\r\n\t\t\t\t\tif(r[o] == \"String\"){\r\n\t\t\t\t\t\ttestModel[o] = \"Lewis\";\r\n\t\t\t\t\t\ttestUpdateModel[o] = \"Lewis1\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(r[o] == \"Number\"){\r\n\t\t\t\t\t\ttestModel[o] = 123;\r\n\t\t\t\t\t\ttestUpdateModel[o] = 1231;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(r[o] == \"Array\"){\r\n\t\t\t\t\t\ttestModel[o] = [{name: \"Test\"}];\r\n\t\t\t\t\t\ttestUpdateModel[o] = [{name: \"Test1\"}];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(r[o] == \"Date\"){\r\n\t\t\t\t\t\ttestModel[o] = new Date();\r\n\t\t\t\t\t\ttestUpdateModel[o] = new Date();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(r[o] == \"Boolean\"){\r\n\t\t\t\t\t\ttestModel[o] = true;\r\n\t\t\t\t\t\ttestUpdateModel[o] = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tvar scope = $scope.$new();\r\n\t\t\tmodule_name = Module_Name.toLowerCase();\r\n\t\t\t$controller(module_name+'Ctrl', {$scope: scope});\r\n\t\t\tconsole.log(testModel);\r\n\t\t\tscope[\"create\"+Module_Name](testModel).then(function(id){\r\n\t\t\t\tscope[\"getAll\"+Module_Name]().then(function(data){\r\n\t\t\t\t\tif(data.length == 0)\r\n\t\t\t\t\t\treturn checkedFalse(mm, $scope);\r\n\t\t\t\t\tscope[\"update\"+Module_Name](testUpdateModel).then(function(){\r\n\t\t\t\t\t\tscope[\"get\"+Module_Name+\"ById\"](id).then(function(data_){\r\n\t\t\t\t\t\t\t\t/*check update unfinished*/\r\n\t\t\t\t\t\t\tscope[\"delete\"+Module_Name+\"ById\"](id).then(function(){\r\n\t\t\t\t\t\t\t\tmm.checked=true;\r\n\t\t\t\t\t\t\t\t$scope.$digest();\r\n\t\t\t\t\t\t\t}, function(err){checkedFalse(mm, $scope)});\r\n\t\t\t\t\t\t}, function(err){checkedFalse(mm, $scope)});\r\n\t\t\t\t\t}, function(err){checkedFalse(mm, $scope)});\r\n\t\t\t\t}, function(err){checkedFalse(mm, $scope)});\r\n\t\t\t}, function(err){checkedFalse(mm, $scope)});\r\n\t\t}\r\n\t\t\r\n\t}]);\r\n})();\n(function(){\r\n\tapp.controller('overviewsCtrl', ['$scope', \r\n\t\t'meanData', function($scope, meanData){\r\n\r\n\t\t\r\n\t\t\r\n\t}])\r\n})();\n(function(){\r\n\tapp.controller('usermCtrl', ['$scope', 'meanData',\r\n\t\t'$state', function($scope, meanData, $state){\r\n\t\t\r\n\t\tmeanData.getAllUsers().then(function(res){\r\n\t\t\t$scope.users = res.data;\r\n\t\t});\r\n\r\n\t\t$scope.deleteUser = function(id){\r\n\t\t\tif(confirm(\"Are you sure to delete?\")){\r\n\t\t\t\tmeanData.deleteUser(id).then(function(res){\r\n\t\t\t\t\talert(res.data.message);\r\n\t\t\t\t\t$state.reload();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}])\r\n})();\n(function(){\r\n\tapp.controller('settingsCtrl', ['$scope', 'meanData',\r\n\t\t\t\t'$state', function($scope, meanData, $state){\r\n\r\n\t\t$scope.backupDB = function(){\r\n\t\t\tmeanData.doDBBackup().then(function(res){\r\n\t\t\t\talert(res.data.message);\r\n\t\t\t\t$state.reload();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.getSettings = function(){\r\n\t\t\tmeanData.getSettings().then(function(res){\r\n\t\t\t\tif(res.length > 1){\r\n\t\t\t\t\talert(\"More than one settings found!\");\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\t$scope.settings = res.data[0];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.updateSettings = function(settings){\r\n\t\t\tmeanData.updateSettings(settings).then(function(res){\r\n\t\t\t\talert(res.data.message);\r\n\t\t\t\twindow.location.href = \"/admin/settings\";\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$scope.deleteSettings = function(){\r\n\t\t\tmeanData.deleteSettings().then(function(res){\r\n\t\t\t\talert(res.data.message);\r\n\t\t\t});\r\n\t\t}\r\n\t}])\r\n})();\n(function () {\r\n  app.service('authentication', ['$http', '$window',\r\n       function ($http, $window) {\r\n\r\n    var saveToken = function (token) {\r\n      $window.localStorage['mean-token'] = token;\r\n    };\r\n\r\n    var getToken = function () {\r\n      return $window.localStorage['mean-token'];\r\n    };\r\n\r\n    var isLoggedIn = function () {\r\n      var token = getToken();\r\n      var payload;\r\n\r\n      if(token){\r\n        payload = token.split('.')[1];\r\n        payload = $window.atob(payload);\r\n        payload = JSON.parse(payload);\r\n\r\n        return payload.exp > Date.now() / 1000;\r\n      }else{\r\n        return false;\r\n      }\r\n    };\r\n\r\n    var currentUser = function() {\r\n      if(isLoggedIn()){\r\n        var token = getToken();\r\n        var payload = token.split('.')[1];\r\n        payload = $window.atob(payload);\r\n        payload = JSON.parse(payload);\r\n        \r\n        return {\r\n          _id : payload._id,\r\n          name: payload.name\r\n        };\r\n      }\r\n    };\r\n\r\n    var login = function (user) {\r\n      return $http.post('/api/login', user).success(function (data) {\r\n        saveToken(data.token);\r\n      })\r\n    };\r\n\r\n    var logout = function () {\r\n      $window.localStorage.removeItem('mean-token');\r\n    };\r\n\r\n    return {\r\n      login: login,\r\n      isLoggedIn: isLoggedIn,\r\n      currentUser: currentUser,\r\n      logout: logout,\r\n      getToken: getToken\r\n    }\r\n\r\n  }])\r\n  \r\n})();\n(function () {\r\n  app.service('meanData', ['$http', 'authentication',\r\n      function meanData($http, authentication) {\r\n    \r\n    var serverUrl = \"/api\";\r\n    var auth = {\r\n        headers: {\r\n          Authorization: 'Bearer ' + authentication.getToken()\r\n        }\r\n    };\r\n\r\n    /***** User *****/\r\n    var getAllUsers = function () {\r\n      return $http.get(serverUrl + '/user', auth);\r\n    };\r\n\r\n    var getUserById = function (id) {\r\n      return $http.get(serverUrl + '/user/' + id, auth);\r\n    };\r\n\r\n    var createUser = function (newUser) {\r\n      return $http.post(serverUrl + '/user', newUser);\r\n    };\r\n\r\n    var updateUser = function (updateUser) {\r\n      return $http.put(serverUrl + '/user', updateUser, auth);\r\n    };\r\n\r\n    var deleteUser = function (id) {\r\n      return $http.delete(serverUrl + '/user?id=' + id, auth);\r\n    };\r\n\r\n    /***** Log *****/\r\n    var getAllLogs = function(){\r\n      return $http.get(serverUrl + '/log', auth);\r\n    }\r\n\r\n    var getLogsByIp = function(ip){\r\n      return $http.get(serverUrl + '/log?ip=' + ip, auth)\r\n    }\r\n\r\n    var getLogsByDate = function(date){\r\n      return $http.get(serverUrl + '/log?date=' + date, auth);\r\n    }\r\n\r\n    var deleteAllLogs = function(){\r\n      return $http.delete(serverUrl + '/log', auth);\r\n    }\r\n\r\n    /***** Settings *****/\r\n    var getSettings = function(){\r\n      return $http.get(serverUrl + '/settings', auth);\r\n    }\r\n\r\n    var doDBBackup = function(){\r\n      return $http.get(serverUrl + '/settings/dbbu', auth);\r\n    }\r\n\r\n    var updateSettings = function(settings){\r\n      return $http.put(serverUrl + '/settings', settings, auth);\r\n    }\r\n\r\n    var deleteSettings = function(){\r\n      return $http.delete(serverUrl + '/settings', auth);\r\n    }\r\n\r\n    /***** Module_Model *****/\r\n    var getAllModuleModel = function(){\r\n      return $http.get(serverUrl + '/mm', auth);\r\n    }\r\n\r\n    var createModuleModel = function(mm){\r\n      return $http.post(serverUrl + '/mm', mm, auth);\r\n    }\r\n\r\n    var updateModuleModel = function(mm){\r\n      return $http.put(serverUrl + '/mm', mm, auth);\r\n    }\r\n\r\n    var deleteModuleModelById = function(id, moduleName){\r\n      return $http.delete(serverUrl + '/mm?id=' + id + \"&moduleName=\" +\r\n                                                moduleName, auth);\r\n    }\r\n/*MG*//*** Test ***/\r\nvar getAllTest = function () { return $http.get(serverUrl + '/test' ); };\r\nvar getTestById = function (id) { return $http.get(serverUrl + '/test?id=' + id ); };\r\nvar createTest = function (test) { return $http.post(serverUrl + '/test', test ); };\r\nvar updateTest = function (test) { return $http.put(serverUrl + '/test' , test ); };\r\nvar deleteTestById = function (id) { return $http.delete(serverUrl + '/test?id=' + id ); };\r\n/*** /Test ***/\r\n\r\n    return {\r\n      getAllUsers: getAllUsers,\r\n      createUser: createUser,\r\n      updateUser: updateUser,\r\n      deleteUser: deleteUser,\r\n      getUserById: getUserById,\r\n\r\n      getSettings: getSettings,\r\n      doDBBackup: doDBBackup,\r\n      updateSettings: updateSettings,\r\n      deleteSettings: deleteSettings,\r\n\r\n      getAllLogs: getAllLogs,\r\n      getLogsByIp: getLogsByIp,\r\n      getLogsByDate: getLogsByDate,\r\n      deleteAllLogs: deleteAllLogs,\r\n\r\n      getAllModuleModel: getAllModuleModel,\r\n      createModuleModel: createModuleModel,\r\n      updateModuleModel: updateModuleModel,\r\n      deleteModuleModelById: deleteModuleModelById\r\n/*** TestR ***/, getAllTest: getAllTest,getTestById: getTestById,createTest: createTest,updateTest: updateTest,deleteTestById: deleteTestById/*** /TestR ***//*MGR*/\r\n    }\r\n  }])\r\n})();\n(function () {\r\n  app.directive('navigation', function () {\r\n    return {\r\n      restrict: 'EA',\r\n      templateUrl: '/common/directives/navigation/navigation.view.html'\r\n    }\r\n  });\r\n\r\n  app.controller('navCtrl', ['$scope', '$location', 'authentication', '$state', '$window', '$rootScope',\r\n  function($scope, $location, authentication, $state, $window, $rootScope){\r\n    $scope.logout = function () {\r\n      authentication.logout();\r\n      $window.location.href = \"/\";\r\n    };\r\n    \r\n    // get current user\r\n\t  $scope.currentUser = authentication.currentUser();\r\n\t\r\n    $scope.isLoggedIn = authentication.isLoggedIn();\r\n    $rootScope.isActive = function(viewLocation){\r\n      if(viewLocation === '/')\r\n        return $location.path() === viewLocation;\r\n      return $location.path().indexOf(viewLocation) >= 0;\r\n    };\r\n  }])\r\n})();"]}